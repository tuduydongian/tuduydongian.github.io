<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Use Custom Event instead Generic Event | Tư Duy Đơn Giản</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Vào một ngày đẹp trời, tôi đã quyết định chỉ xài Custom event thay vì Generic event. Tại sao?">
<meta name="keywords" content="best practice">
<meta property="og:type" content="article">
<meta property="og:title" content="Use Custom Event instead Generic Event">
<meta property="og:url" content="https://tuduydongian.com/2017/06/use-custom-event-instead-generic-event/index.html">
<meta property="og:site_name" content="Tư Duy Đơn Giản">
<meta property="og:description" content="Vào một ngày đẹp trời, tôi đã quyết định chỉ xài Custom event thay vì Generic event. Tại sao?">
<meta property="og:updated_time" content="2017-11-30T16:33:19.200Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Use Custom Event instead Generic Event">
<meta name="twitter:description" content="Vào một ngày đẹp trời, tôi đã quyết định chỉ xài Custom event thay vì Generic event. Tại sao?">
<meta name="twitter:creator" content="@tuduydongian">
<meta property="fb:admins" content="100000290423290">
<meta property="fb:app_id" content="124307384811590">
  
    <link rel="alternate" href="/atom.xml" title="Tư Duy Đơn Giản" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-100038903-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  
<!-- Facebook SDK -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.9&appId=124307384811590";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- End Facebook SDK -->


  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Tư Duy Đơn Giản</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Nghĩ đơn giản, làm đơn giản</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://tuduydongian.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2017/06/use-custom-event-instead-generic-event" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/use-custom-event-instead-generic-event/" class="article-date">
  <time datetime="2017-06-27T17:00:00.000Z" itemprop="datePublished">2017-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/symfony/">symfony</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Use Custom Event instead Generic Event
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Vào một ngày đẹp trời, tôi đã quyết định chỉ xài Custom event thay vì Generic event. Tại sao?<br><a id="more"></a></p>
<p>Khi sử dụng Event Listener, để tiết kiệm thời gian ta thường hay sử dụng <a href="https://symfony.com/doc/current/components/event_dispatcher/generic_event.html" target="_blank" rel="noopener">Generic Event</a>. Tuy nhiên nó cũng để lại nhiều phiền phức trong quá trình maintenance. Sau đây là những lợi điểm của việc sử dụng <a href="http://symfony.com/doc/current/components/event_dispatcher.html#creating-an-event-class" target="_blank" rel="noopener">Custom Event</a> thay vì <code>Generic Event</code>.</p>
<h3 id="1-Custom-event-is-class"><a href="#1-Custom-event-is-class" class="headerlink" title="1. Custom event is class"></a>1. Custom event is class</h3><p>Vâng, cháu nó là class nên có thể <code>extends</code>, <code>implement</code> interface, use <code>trait</code> và những thứ hay ho của lập trình hướng đối tượng</p>
<h3 id="2-Find-Usage"><a href="#2-Find-Usage" class="headerlink" title="2. Find Usage"></a>2. Find Usage</h3><p>Xài IDE dễ dàng <code>find usage</code> để biết được event của chúng ta được sử dụng ở những chỗ nào và mò ra được nơi nào ném event, nơi nào nghe event.</p>
<h3 id="3-Test-neu-thich"><a href="#3-Test-neu-thich" class="headerlink" title="3. Test nếu thích"></a>3. Test nếu thích</h3><p>Vì nó là class nên có thể unit test được nó, tuy nhiên chỉ nên test khi có logic trong này (còn nếu class chỉ thuần <code>getter</code> và  <code>setter</code> thì hãy test nếu tay bạn đủ to)</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircleDrawedEvent</span> <span class="keyword">extends</span> <span class="title">Event</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> __construct($center, $radius) &#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;center = $center;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;radius = $radius;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// should test this</span></span><br><span class="line">    <span class="keyword">public</span> getDiameter() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;radius * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-Strictype-cua-class-event-o-listener"><a href="#4-Strictype-cua-class-event-o-listener" class="headerlink" title="4. Strictype của class event ở listener"></a>4. Strictype của class event ở listener</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShapeSubscriber</span> <span class="keyword">implements</span> <span class="title">EventSubscriberInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getSubscribedEvents</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            <span class="string">'circle.drawed'</span> =&gt; <span class="string">'logNewCircleDrawed'</span>,</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">logNewCircleDrawed</span><span class="params">(CircleDrawedEvent $event)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-Properties-getter-setter-day-du"><a href="#5-Properties-getter-setter-day-du" class="headerlink" title="5. Properties, getter/setter đầy đủ"></a>5. Properties, getter/setter đầy đủ</h3><p>Nếu xài <code>Generic Event</code>, bạn sẽ phải đảm bảo sự đồng bộ về data lúc ném ra và lúc lắng nghe để xử lý một cách thủ công, như sau:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$event = <span class="keyword">new</span> GenericEvent($subject, [<span class="string">'data'</span> =&gt; <span class="string">'Foo'</span>]);</span><br><span class="line">$dispatcher-&gt;dispatch(AppEvent::Foo, $event);</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooListener</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">filter</span><span class="params">(GenericEvent $event)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $data = $event[<span class="string">'data'</span>];</span><br><span class="line">        $subject = $event-&gt;getSubject();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">AppEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Please ensure Generic event should be like:</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * new GenericEvent($subject, ['data' =&gt; 'Foo']);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Foo = <span class="string">'app.foo'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Vậy đấy, nếu event là class custom thì bạn set, get các properties một cách bình thường và đúng chuẩn, không cần phải lăn tăn về vấn đề maintenance kiểu nông dân như trên.</p>
<h3 id="So-let’s-use-Custom-event-please-rock"><a href="#So-let’s-use-Custom-event-please-rock" class="headerlink" title="So, let’s use Custom event, please :rock:"></a>So, let’s use Custom event, please :rock:</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://tuduydongian.com/2017/06/use-custom-event-instead-generic-event/" data-id="cjampbbbm0006ipnfokuwmk0e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/best-practice/">best practice</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/06/webpack-simple/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Webpack thật đơn giản
        
      </div>
    </a>
  
  
    <a href="/2017/05/ansible-tips-and-trick/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Ansible - tips and tricks</div>
    </a>
  
</nav>

  
</article>



  <section id="comments">
  <div class="fb-comments" data-href="https://tuduydongian.com/2017/06/use-custom-event-instead-generic-event/index.html" data-width="100%" data-numposts="10"></div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/devops/">devops</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/">frontend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js,</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/symfony/">symfony</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/">ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/best-practice/">best practice</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootstrap-native/">bootstrap-native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cheatsheet/">cheatsheet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome-headless/">chrome headless</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js-async/">js async</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/puppeteer/">puppeteer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/terminal/">terminal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tips/">tips</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/best-practice/" style="font-size: 20px;">best practice</a> <a href="/tags/bootstrap-native/" style="font-size: 10px;">bootstrap-native</a> <a href="/tags/cheatsheet/" style="font-size: 12.5px;">cheatsheet</a> <a href="/tags/chrome-headless/" style="font-size: 10px;">chrome headless</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/gitlab/" style="font-size: 10px;">gitlab</a> <a href="/tags/js/" style="font-size: 17.5px;">js</a> <a href="/tags/js-async/" style="font-size: 10px;">js async</a> <a href="/tags/puppeteer/" style="font-size: 10px;">puppeteer</a> <a href="/tags/terminal/" style="font-size: 10px;">terminal</a> <a href="/tags/tips/" style="font-size: 10px;">tips</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/browser-automation-chrome-headless-puppeteer/">Tự động hoá browser với Chrome headless - Puppeteer - Nodejs</a>
          </li>
        
          <li>
            <a href="/2017/11/async-await/">Async/Await trong javascript</a>
          </li>
        
          <li>
            <a href="/2017/11/php-type-hinting/">PHP Type hinting</a>
          </li>
        
          <li>
            <a href="/2017/10/secure-gitlab-letsencrypt/">Bảo mật Gitlab với Let&#39;s Encrypt</a>
          </li>
        
          <li>
            <a href="/2017/10/single-action-controller/">Single Action Controller</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 tuduydongian.com
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>